steps:
  #
  #  OWID curated datasets
  #
  data://garden/owid/latest/covid:
    - etag://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv
  data://garden/owid/latest/population_density:
    - data://garden/owid/latest/key_indicators
    - data://garden/reference
  data://garden/owid/latest/key_indicators:
    - data://garden/hyde/2017/baseline
    - data://garden/gapminder/2019-12-10/population
    - data://garden/wpp/2019/standard_projections
    - data://garden/wb/2021-07-01/wb_income
    - data://open_numbers/open_numbers/latest/open_numbers__world_development_indicators
    - data://garden/reference
  data://garden/wpp/2019/standard_projections:
    - data://meadow/wpp/2019/standard_projections
  data://garden/who/2021-07-01/ghe:
    - data://meadow/who/2021-07-01/ghe
    - data://garden/reference
  data://garden/gapminder/2019-12-10/population:
    - data://meadow/gapminder/2019-12-10/population
  data://meadow/un/2022-07-11/un_wpp:
    - walden://un/2022-07-11/un_wpp
  data://garden/un/2022-07-11/un_wpp:
    - data://meadow/un/2022-07-11/un_wpp
  data://meadow/gapminder/2019-12-10/population:
    - walden://gapminder/2019-12-10/population
  data://meadow/hyde/2017/baseline:
    - walden://hyde/2017/baseline
    - data://meadow/hyde/2017/general_files
  data://meadow/hyde/2017/general_files:
    - walden://hyde/2017/general_files
  data://garden/hyde/2017/baseline:
    - data://meadow/hyde/2017/baseline
  data://meadow/who/2021-07-01/ghe:
    - walden://who/2021-07-01/ghe
  data://meadow/who/2021-07-01/gho:
    - walden://who/2021-07-01/gho
  data://meadow/wpp/2019/standard_projections:
    - walden://wpp/2019/standard_projections
  grapher://who/2021-07-01/ghe:
    - data://garden/who/2021-07-01/ghe
  data://meadow/living_planet/2020-09-10/lpd:
    - walden://living_planet/2020-09-10/lpd
  data://garden/living_planet/2020-09-10/lpd:
    - data://meadow/living_planet/2020-09-10/lpd
  data://meadow/wb/2021-07-01/wb_income:
    - walden://wb/2021-07-01/wb_income
  data://garden/wb/2021-07-01/wb_income:
    - data://meadow/wb/2021-07-01/wb_income
  data://garden/ggdc/2020-10-01/ggdc_maddison:
    - walden://ggdc/2020-10-01/ggdc_maddison
  grapher://ggdc/2020-10-01/ggdc_maddison:
    - data://garden/ggdc/2020-10-01/ggdc_maddison
  data://meadow/worldbank_wdi/2022-05-26/wdi:
    - walden://worldbank_wdi/2022-05-26/wdi
  data://garden/worldbank_wdi/2022-05-26/wdi:
    - data://meadow/worldbank_wdi/2022-05-26/wdi
  grapher://worldbank_wdi/2022-05-26/wdi:
    - data://garden/worldbank_wdi/2022-05-26/wdi
  data://meadow/un_sdg/2022-07-07/un_sdg:
    - walden://un_sdg/2022-07-07/un_sdg
  data://garden/un_sdg/2022-07-07/un_sdg:
    - data://meadow/un_sdg/2022-07-07/un_sdg
  grapher://owid/latest/population_density:
    - data://garden/owid/latest/population_density

  #
  # Energy datasets.
  #
  # Garden step for BP statistical review 2021.
  # NOTE: This dataset is not used in grapher. It exists only to fill gaps in the 2022 version.
  data://garden/bp/2022-07-11/statistical_review:
    - backport://backport/owid/latest/dataset_5347_statistical_review_of_world_energy__bp__2021
  # Garden step for BP statistical review 2022.
  # NOTE: For the moment this is not the full processing (which is still done in importers).
  #  This garden step loads the dataset and adds region aggregates properly, plus some other minor improvements.
  data://garden/bp/2022-07-14/statistical_review:
    # The backported 2022 release is the main source of data of this step.
    - backport://backport/owid/latest/dataset_5650_statistical_review_of_world_energy__bp__2022
    # The 2021 release is loaded just to fill missing data in the current version (and to get a missing column).
    - data://garden/bp/2022-07-11/statistical_review
    - data://garden/owid/latest/key_indicators
    - data://garden/wb/2021-07-01/wb_income
  # Grapher step for BP statistical review 2022.
  grapher://bp/2022-07-14/statistical_review:
    - data://garden/bp/2022-07-14/statistical_review
  # Garden step for BP energy mix 2022.
  data://garden/bp/2022-07-14/energy_mix:
    - data://garden/bp/2022-07-14/statistical_review
    - data://garden/owid/latest/key_indicators
    - data://garden/wb/2021-07-01/wb_income
  # Grapher step for BP energy mix 2022.
  grapher://bp/2022-07-14/energy_mix:
    - data://garden/bp/2022-07-14/energy_mix
  # Meadow step for Shift data 2022.
  data://meadow/shift/2022-07-18/fossil_fuel_production:
    - walden://shift/2022-07-18/fossil_fuel_production
  # Garden step for Shift data 2022.
  data://garden/shift/2022-07-18/fossil_fuel_production:
    - data://meadow/shift/2022-07-18/fossil_fuel_production
  # Garden step for Fossil Fuel Production 2022.
  data://garden/energy/2022-07-20/fossil_fuel_production:
    - data://garden/bp/2022-07-14/statistical_review
    - data://garden/shift/2022-07-18/fossil_fuel_production
    - data://garden/owid/latest/key_indicators
  # Grapher step for Fossil Fuel Production 2022.
  grapher://energy/2022-07-20/fossil_fuel_production:
    - data://garden/energy/2022-07-20/fossil_fuel_production

  # Autogenerated steps by walkthrough
  grapher://un_sdg/2022-07-07/un_sdg:
  - data://garden/un_sdg/2022-07-07/un_sdg

  # Examples
  data://examples/examples/latest/script_example:
    - walden://wb/2021-07-01/wb_income
    - data://garden/ggdc/2020-10-01/ggdc_maddison
    - data://garden/reference
  data://examples/examples/latest/jupytext_example:
    - data://garden/ggdc/2020-10-01/ggdc_maddison
  data://examples/examples/latest/notebook_example:
    - data://garden/ggdc/2020-10-01/ggdc_maddison
  data://examples/examples/latest/vs_code_cells_example:
    - data://garden/ggdc/2020-10-01/ggdc_maddison
  # private steps that require S3 access keys for private walden and are run with `etl --private`
  data-private://examples/examples/latest/private_example:
    # NOTE: this dataset is public as we don't have any private data yet
    - walden-private://ggdc/2020-10-01/ggdc_maddison


# Sub-dags to import
include:
  - dag_files/dag_open_numbers.yml
  - dag_files/dag_faostat.yml
